<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assemble - Universal Automation Wiki</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/components.css">
    <link rel="stylesheet" href="/assets/css/category.css">
    <link rel="stylesheet" href="/assets/css/responsive.css">
    <link rel="stylesheet" href="/assets/css/documentation.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600;700&family=Geologica:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Placeholder styles to prevent layout shift */
        #header-placeholder { min-height: 70px; }
        #footer-placeholder { min-height: 250px; }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="docs-container">
        <div class="docs-layout">
            <div id="sidebar-placeholder"></div>

            <main class="docs-main">
                <article class="docs-article">
                    <header class="docs-header">
                        <div class="docs-breadcrumb">
                            <nav aria-label="Breadcrumb">
                                <ol>
                                    
                                        
                                            <li><a href="/">Home</a></li>
                                        
                                    
                                        
                                            <li><a href="/docs/">Documentation</a></li>
                                        
                                    
                                        
                                            <li><a href="/docs/routines/">Routines</a></li>
                                        
                                    
                                        
                                            <li aria-current="page">Assemble</li>
                                        
                                    
                                </ol>
                            </nav>
                        </div>
                        
                        <div class="docs-title-section">
                            <h1 class="docs-page-title">Assemble</h1>
                            
                            <p class="docs-page-subtitle">This script reads data from various JSON files located in a specified directory, processes it, and uses a Jinja2 template (`page-template.html`) to generate a final HTML output file. It handles metadata, content structuring (like trees and timelines), breadcrumbs, and alternative approaches.</p>
                            
                        </div>
                    </header>

                    <div class="docs-content">
                        <p>This script reads data from various JSON files located in a specified directory, processes it, and uses a Jinja2 template (<code class="docs-inline-code">page-template.html</code>) to generate a final HTML output file. It handles metadata, content structuring (like trees and timelines), breadcrumbs, and alternative approaches.</p>
<h2 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">&para;</a></h2>
<p>The primary purpose of <code class="docs-inline-code">assemble.py</code> is to aggregate structured data from multiple JSON sources and render it into a standardized HTML page format using a predefined template. It serves as the final step in generating documentation or report pages from processed data.</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>assemble.py<span class="w"> </span>&lt;files_dir&gt;<span class="w"> </span>&lt;output_dir&gt;
</code></pre></div>

<ul class="docs-list">
<li><code class="docs-inline-code">&lt;files_dir&gt;</code>: The directory containing the input JSON files (1.json - 9.json), <code class="docs-inline-code">breadcrumbs.txt</code>, and any alternative approach files (<code class="docs-inline-code">alt*.json</code>).</li>
<li><code class="docs-inline-code">&lt;output_dir&gt;</code>: The directory where the generated HTML file will be saved.</li>
</ul>
<h2 id="input-files">Input Files<a class="headerlink" href="#input-files" title="Permanent link">&para;</a></h2>
<p>The script expects the following files within the <code class="docs-inline-code">&lt;files_dir&gt;</code>:</p>
<ul class="docs-list">
<li><code class="docs-inline-code">1.json</code>: Contains page metadata (title, summary, status, progress, etc.).</li>
<li><code class="docs-inline-code">2.json</code>: Contains the main hierarchical tree structure data for the primary approach.</li>
<li><code class="docs-inline-code">3.json</code>: Contains timeline data, including historical events and future predictions.</li>
<li><code class="docs-inline-code">4.json</code>: Contains data related to challenges, obstacles, or risks.</li>
<li><code class="docs-inline-code">5.json</code>: Contains information about adoption stages or maturity levels.</li>
<li><code class="docs-inline-code">6.json</code>: Contains implementation assessment details, steps, or levels.</li>
<li><code class="docs-inline-code">7.json</code>: Contains Return on Investment (ROI) analysis data, including timeframes and key benefits.</li>
<li><code class="docs-inline-code">8.json</code>: Contains information about relevant future technologies or trends.</li>
<li><code class="docs-inline-code">9.json</code>: Contains industrial specifications, such as performance metrics and implementation requirements.</li>
<li><code class="docs-inline-code">breadcrumbs.txt</code>: A plain text file containing the breadcrumb path string (e.g., <code class="docs-inline-code">/category/sub-category</code>).</li>
<li><code class="docs-inline-code">alt*.json</code> (Optional): JSON files starting with <code class="docs-inline-code">alt</code> and ending with <code class="docs-inline-code">.json</code>, each representing an alternative approach or tree structure.</li>
</ul>
<h2 id="key-functions">Key Functions<a class="headerlink" href="#key-functions" title="Permanent link">&para;</a></h2>
<ul class="docs-list">
<li><strong><code class="docs-inline-code">read_json_file(file_path)</code></strong>: Reads a specified JSON file and returns its content parsed as a Python dictionary. Handles file opening and JSON decoding.</li>
<li><strong><code class="docs-inline-code">process_bold_text(text)</code></strong>: Uses regular expressions to find text enclosed in double asterisks (<code class="docs-inline-code">**text**</code>) and replaces it with HTML <code class="docs-inline-code">&lt;strong&gt;text&lt;/strong&gt;</code> tags.</li>
<li><strong><code class="docs-inline-code">generate_tree_preview_text(tree_data)</code></strong>: Generates a compact, ASCII-art representation of the tree structure found in <code class="docs-inline-code">tree_data</code>. It includes the root, main steps (children), and initial sub-steps (grandchildren), using shortened names and UUIDs for brevity. Designed for previews, like in alternative approach cards.</li>
<li><strong><code class="docs-inline-code">process_metadata(metadata, breadcrumb_str)</code></strong>: Takes the raw metadata dictionary (from <code class="docs-inline-code">1.json</code>) and the breadcrumb string. It processes fields like <code class="docs-inline-code">progress_percentage</code> (handling different keys and ensuring numeric conversion), formats the <code class="docs-inline-code">summary</code> into paragraphs, sets default values for missing fields, adds standard contributor text and the current date (<code class="docs-inline-code">last_updated</code>), and includes the raw breadcrumb string.</li>
<li><strong><code class="docs-inline-code">process_breadcrumbs(breadcrumbs_str)</code></strong>: Parses the raw breadcrumb string (e.g., <code class="docs-inline-code">/category/sub-category</code>) into a structured list of dictionaries. Each dictionary represents a breadcrumb link with <code class="docs-inline-code">name</code> (formatted title) and <code class="docs-inline-code">url</code> (path to the parent index, or <code class="docs-inline-code">None</code> for the last item). Includes a 'Home' link.</li>
<li><strong><code class="docs-inline-code">main()</code></strong>: Orchestrates the entire process:<ul class="docs-list">
<li>Parses command-line arguments (<code class="docs-inline-code">&lt;files_dir&gt;</code>, <code class="docs-inline-code">&lt;output_dir&gt;</code>).</li>
<li>Constructs paths to all expected input JSON files and <code class="docs-inline-code">breadcrumbs.txt</code>.</li>
<li>Loads data from mandatory JSON files (<code class="docs-inline-code">1.json</code>, <code class="docs-inline-code">2.json</code>) using <code class="docs-inline-code">read_json_file</code>.</li>
<li>Loads data from optional JSON files (3-9) if they exist, otherwise uses empty dictionaries.</li>
<li>Reads the <code class="docs-inline-code">breadcrumbs.txt</code> file if it exists.</li>
<li>Finds and loads alternative approach files (<code class="docs-inline-code">alt*.json</code>), generating preview text for each using <code class="docs-inline-code">generate_tree_preview_text</code>.</li>
<li>Sets up the Jinja2 environment, loading templates from the <code class="docs-inline-code">templates</code> directory and adding the <code class="docs-inline-code">process_bold_text</code> filter and <code class="docs-inline-code">generate_tree_preview_text</code>, <code class="docs-inline-code">enumerate</code> globals.</li>
<li>Loads the <code class="docs-inline-code">page-template.html</code> template.</li>
<li>Calls <code class="docs-inline-code">process_metadata</code> and <code class="docs-inline-code">process_breadcrumbs</code> to prepare metadata and navigation data.</li>
<li>Processes data from optional JSONs (timeline, challenges, adoption, ROI, future tech, specs) into structured lists suitable for the template.</li>
<li>Builds the final context dictionary containing all processed data.</li>
<li>Renders the Jinja2 template with the context.</li>
<li>Determines the output HTML filename based on the metadata's <code class="docs-inline-code">slug</code> or <code class="docs-inline-code">title</code>, sanitizing it.</li>
<li>Creates the output directory if it doesn't exist.</li>
<li>Writes the rendered HTML content to the output file.</li>
<li>Includes error handling for file not found, JSON decoding errors, and other exceptions.</li>
</ul>
</li>
</ul>
<h2 id="template-processing">Template Processing<a class="headerlink" href="#template-processing" title="Permanent link">&para;</a></h2>
<p>The script utilizes the Jinja2 templating engine to generate the final HTML output:</p>
<ul class="docs-list">
<li><strong>Environment Setup</strong>: A Jinja2 <code class="docs-inline-code">Environment</code> is configured to load templates from the <code class="docs-inline-code">templates/</code> directory. Settings like <code class="docs-inline-code">autoescape=True</code>, <code class="docs-inline-code">trim_blocks=True</code>, and <code class="docs-inline-code">lstrip_blocks=True</code> are enabled for security and cleaner template rendering.</li>
<li><strong>Template Loading</strong>: The primary template <code class="docs-inline-code">page-template.html</code> is loaded from the environment.</li>
<li><strong>Custom Filters/Globals</strong>:<ul class="docs-list">
<li><code class="docs-inline-code">process_bold</code>: A custom filter is added to allow <code class="docs-inline-code">{{ some_text | process_bold }}</code> syntax in the template for converting Markdown bold to HTML bold.</li>
<li><code class="docs-inline-code">generate_tree_preview_text</code>: Made available as a global function if needed directly within the template (though primarily used during alternative processing).</li>
<li><code class="docs-inline-code">enumerate</code>: The built-in <code class="docs-inline-code">enumerate</code> function is added as a global for easier iteration with indices in the template.</li>
</ul>
</li>
<li><strong>Context Data</strong>: A comprehensive Python dictionary (<code class="docs-inline-code">context</code>) is prepared, containing all the processed data extracted and transformed from the input JSON files (metadata, tree structure, timeline entries, challenges, adoption stages, implementation steps, ROI points, benefits, future technologies, specifications, breadcrumbs, and alternative approaches).</li>
<li><strong>Rendering</strong>: The <code class="docs-inline-code">template.render(context)</code> method is called to inject the context data into the <code class="docs-inline-code">page-template.html</code>, producing the final HTML string.</li>
</ul>
<h2 id="output">Output<a class="headerlink" href="#output" title="Permanent link">&para;</a></h2>
<p>The script generates a single HTML file located in the specified <code class="docs-inline-code">&lt;output_dir&gt;</code>.</p>
<ul class="docs-list">
<li><strong>Filename</strong>: The name of the HTML file is automatically generated based on the <code class="docs-inline-code">slug</code> field found in the processed metadata (<code class="docs-inline-code">1.json</code>). If <code class="docs-inline-code">slug</code> is not present, it falls back to the <code class="docs-inline-code">title</code> field. The name is converted to lowercase, spaces are replaced with hyphens, and characters other than alphanumerics, hyphens, or underscores are removed to ensure it's filesystem-safe. A default name like <code class="docs-inline-code">output.html</code> is used if no suitable title/slug is found.</li>
<li><strong>Content</strong>: The content of the file is the fully rendered HTML page, combining the structure from <code class="docs-inline-code">page-template.html</code> with the data processed from all the input JSON files.</li>
</ul>
                    </div>
                    
                    <footer class="docs-footer">
                        <div class="docs-meta">
                            <p>Part of the <a href="/">Universal Automation Wiki</a> documentation</p>
                        </div>
                    </footer>
                </article>
            </main>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="/assets/js/components.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'neutral',
            themeVariables: {
                primaryColor: '#126ca8',
                primaryTextColor: '#333',
                primaryBorderColor: '#e0e0e0',
                lineColor: '#666'
            }
        });
    </script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/documentation.js"></script>
    <script>renderDocumentationSidebar('#sidebar-placeholder');</script>
</body>
</html>