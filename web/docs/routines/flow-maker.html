<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Maker - Universal Automation Wiki</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/components.css">
    <link rel="stylesheet" href="/assets/css/category.css">
    <link rel="stylesheet" href="/assets/css/responsive.css">
    <link rel="stylesheet" href="/assets/css/documentation.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600;700&family=Geologica:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Placeholder styles to prevent layout shift */
        #header-placeholder { min-height: 70px; }
        #footer-placeholder { min-height: 250px; }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="docs-container">
        <div class="docs-layout">
            <div id="sidebar-placeholder"></div>

            <main class="docs-main">
                <article class="docs-article">
                    <header class="docs-header">
                        <div class="docs-breadcrumb">
                            <nav aria-label="Breadcrumb">
                                <ol>
                                    
                                        
                                            <li><a href="/">Home</a></li>
                                        
                                    
                                        
                                            <li><a href="/docs/">Documentation</a></li>
                                        
                                    
                                        
                                            <li><a href="/docs/routines/">Routines</a></li>
                                        
                                    
                                        
                                            <li aria-current="page">Flow Maker</li>
                                        
                                    
                                </ol>
                            </nav>
                        </div>
                        
                        <div class="docs-title-section">
                            <h1 class="docs-page-title">Flow Maker</h1>
                            
                            <p class="docs-page-subtitle">This script orchestrates a sequence of Python programs to perform a comprehensive analysis related to automation processes. It takes an initial JSON input, runs various analysis and generation scripts, potentially generates alternative process trees, and outputs the results, including intermediate files, metadata, and a final assembled report (typically HTML), into a unique flow-specific directory.</p>
                            
                        </div>
                    </header>

                    <div class="docs-content">
                        <p>This script orchestrates a sequence of Python programs to perform a comprehensive analysis related to automation processes. It takes an initial JSON input, runs various analysis and generation scripts, potentially generates alternative process trees, and outputs the results, including intermediate files, metadata, and a final assembled report (typically HTML), into a unique flow-specific directory.</p>
<h2 class="docs-heading" id="purpose">Purpose<a class="headerlink" href="#purpose" title="Link to this section">¶</a></h2>
<p>The <code class="docs-inline-code">flow-maker.py</code> script serves as the main driver for a multi-step automation analysis workflow. It manages the execution order of several specialized Python scripts, handles input/output file paths between steps, creates a structured output directory for each run, and optionally generates alternative analysis variations based on input parameters.</p>
<h2 class="docs-heading" id="usage">Usage<a class="headerlink" href="#usage" title="Link to this section">¶</a></h2>
<p>To run the script, use the following command structure:</p>
<div class="codehilite"><pre><span></span><code class="language-text">python<span class="w"> </span>flow-maker.py<span class="w"> </span>&lt;input_json&gt;<span class="w"> </span><span class="o">[</span>breadcrumbs<span class="o">]</span>
</code></pre></div>
<ul class="docs-list">
<li><code class="docs-inline-code">&lt;input_json&gt;</code>: (Required) Path to the primary JSON file containing the initial data and configuration for the flow.</li>
<li><code class="docs-inline-code">[breadcrumbs]</code>: (Optional) A string providing context or tracking information, which will be saved in the output directory.</li>
</ul>
<h2 class="docs-heading" id="input-files">Input Files<a class="headerlink" href="#input-files" title="Link to this section">¶</a></h2>
<ul class="docs-list">
<li><strong><code class="docs-inline-code">&lt;input_json&gt;</code>:</strong> A JSON file that provides the starting data for the analysis flow. It may contain parameters controlling the execution, such as the number of <code class="docs-inline-code">alternatives</code> to generate.</li>
<li><strong><code class="docs-inline-code">[breadcrumbs]</code>:</strong> An optional string passed as a command-line argument. If provided, it’s saved to <code class="docs-inline-code">breadcrumbs.txt</code> within the flow’s output directory for tracking or informational purposes.</li>
</ul>
<h2 class="docs-heading" id="key-functions">Key Functions<a class="headerlink" href="#key-functions" title="Link to this section">¶</a></h2>
<ul class="docs-list">
<li><strong><code class="docs-inline-code">run_program(program_name, input_path, output_path, extra_args=None)</code>:</strong><ul class="docs-list">
<li>Executes a specified Python script (<code class="docs-inline-code">program_name</code>) using <code class="docs-inline-code">subprocess.run</code>.</li>
<li>Passes the <code class="docs-inline-code">input_path</code> and <code class="docs-inline-code">output_path</code> as command-line arguments to the target script.</li>
<li>Includes any <code class="docs-inline-code">extra_args</code> provided.</li>
<li>Captures standard output and standard error.</li>
<li>Prints status messages and returns <code class="docs-inline-code">True</code> on success or <code class="docs-inline-code">False</code> on failure.</li>
</ul>
</li>
<li><strong><code class="docs-inline-code">main()</code>:</strong><ul class="docs-list">
<li>Parses command-line arguments (<code class="docs-inline-code">input_json</code>, <code class="docs-inline-code">breadcrumbs</code>).</li>
<li>Loads the initial <code class="docs-inline-code">input_data</code> from the specified JSON file using <code class="docs-inline-code">utils.load_json</code>.</li>
<li>Generates a unique UUID (<code class="docs-inline-code">flow_uuid</code>) for the run.</li>
<li>Creates the main output directory: <code class="docs-inline-code">flow/&lt;flow_uuid&gt;/</code>.</li>
<li>Copies the input JSON and saves breadcrumbs (if any) into the flow directory.</li>
<li>Defines and executes the sequence of programs (see Program Execution Flow).</li>
<li>Handles the generation of alternative trees if requested (see Alternative Tree Generation).</li>
<li>Generates and saves <code class="docs-inline-code">flow-metadata.json</code> summarizing the run.</li>
</ul>
</li>
<li><strong><code class="docs-inline-code">utils</code> Module Functions:</strong><ul class="docs-list">
<li>Imports helper functions like <code class="docs-inline-code">load_json</code> (to read JSON files), <code class="docs-inline-code">save_output</code>, <code class="docs-inline-code">create_output_metadata</code>, <code class="docs-inline-code">get_output_filepath</code>, and <code class="docs-inline-code">handle_command_args</code> from a shared <code class="docs-inline-code">utils.py</code> module. These handle common tasks like file I/O and argument parsing across the different scripts in the workflow.</li>
</ul>
</li>
</ul>
<h2 class="docs-heading" id="program-execution-flow">Program Execution Flow<a class="headerlink" href="#program-execution-flow" title="Link to this section">¶</a></h2>
<p>The script executes a predefined sequence of Python programs. Each program typically takes the output of the previous step (or the initial input) as its input and generates an output file.</p>
<ol class="docs-list docs-list-ordered">
<li><strong>Directory Setup:</strong> A unique directory <code class="docs-inline-code">flow/&lt;flow_uuid&gt;</code> is created. The initial <code class="docs-inline-code">&lt;input_json&gt;</code> is copied to <code class="docs-inline-code">flow/&lt;flow_uuid&gt;/input.json</code>.</li>
<li><strong>Sequential Execution:</strong> The following scripts are run in order:<ul class="docs-list">
<li><code class="docs-inline-code">generate-metadata.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">1.json</code></li>
<li><code class="docs-inline-code">hallucinate-tree.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">2.json</code> (with <code class="docs-inline-code">-saveInputs</code>, <code class="docs-inline-code">-flow_uuid=&lt;uuid&gt;</code>, <code class="docs-inline-code">-flat</code> args)</li>
<li><code class="docs-inline-code">generate-automation-timeline.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">3.json</code></li>
<li><code class="docs-inline-code">generate-automation-challenges.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">4.json</code></li>
<li><code class="docs-inline-code">automation-adoption.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">5.json</code></li>
<li><code class="docs-inline-code">current-implementations.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">6.json</code></li>
<li><code class="docs-inline-code">return-analysis.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">7.json</code></li>
<li><code class="docs-inline-code">future-technology.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">8.json</code></li>
<li><code class="docs-inline-code">specifications-industrial.py</code>: Input <code class="docs-inline-code">input.json</code>, Output <code class="docs-inline-code">9.json</code></li>
<li><code class="docs-inline-code">assemble.py</code>: Input is the entire <code class="docs-inline-code">flow/&lt;flow_uuid&gt;</code> directory. Output is typically an HTML report within the same directory (specific output filename determined by <code class="docs-inline-code">assemble.py</code>).</li>
</ul>
</li>
<li><strong>Input/Output Handling:</strong><ul class="docs-list">
<li>For most steps, the input is the copied <code class="docs-inline-code">input.json</code>.</li>
<li>Intermediate outputs are saved as numbered JSON files (<code class="docs-inline-code">1.json</code> through <code class="docs-inline-code">9.json</code>) within the <code class="docs-inline-code">flow/&lt;flow_uuid&gt;</code> directory.</li>
<li><code class="docs-inline-code">assemble.py</code> is treated specially: it takes the entire flow directory path as input and is responsible for generating the final report(s).</li>
</ul>
</li>
</ol>
<h2 class="docs-heading" id="alternative-tree-generation">Alternative Tree Generation<a class="headerlink" href="#alternative-tree-generation" title="Link to this section">¶</a></h2>
<p>If the initial <code class="docs-inline-code">&lt;input_json&gt;</code> file contains a key <code class="docs-inline-code">"alternatives"</code> with a value greater than 0, the script will generate that number of alternative process trees:</p>
<ol class="docs-list docs-list-ordered">
<li><strong>Input Variation:</strong> For each alternative, a copy of the original <code class="docs-inline-code">input_data</code> is made. Parameters like <code class="docs-inline-code">temperature</code>, <code class="docs-inline-code">approach_name</code>, and <code class="docs-inline-code">approach_description</code> are modified to encourage diverse outputs.</li>
<li><strong>Saving Inputs:</strong> Each modified input is saved to <code class="docs-inline-code">flow/&lt;flow_uuid&gt;/inputs/alt_input_&lt;N&gt;.json</code>.</li>
<li><strong>Execution:</strong> <code class="docs-inline-code">hallucinate-tree.py</code> is run for each alternative input using the <code class="docs-inline-code">-flat</code> argument.</li>
<li><strong>Output:</strong> The output for each alternative is saved to <code class="docs-inline-code">flow/&lt;flow_uuid&gt;/alt&lt;N&gt;.json</code>.</li>
</ol>
<h2 class="docs-heading" id="output">Output<a class="headerlink" href="#output" title="Link to this section">¶</a></h2>
<p>The script generates a primary output directory named <code class="docs-inline-code">flow/&lt;flow_uuid&gt;/</code>, where <code class="docs-inline-code">&lt;flow_uuid&gt;</code> is a unique identifier for the run. This directory contains:</p>
<ul class="docs-list">
<li><code class="docs-inline-code">input.json</code>: A copy of the original input JSON file provided to the script.</li>
<li><code class="docs-inline-code">breadcrumbs.txt</code>: (Optional) Contains the breadcrumbs string if provided via the command line.</li>
<li><code class="docs-inline-code">1.json</code> - <code class="docs-inline-code">9.json</code>: Intermediate JSON output files generated by the corresponding scripts in the execution flow.</li>
<li><code class="docs-inline-code">inputs/</code>: A subdirectory created if alternatives are generated.<ul class="docs-list">
<li><code class="docs-inline-code">alt_input_1.json</code>, <code class="docs-inline-code">alt_input_2.json</code>, …: The modified input JSON files used for generating alternative trees.</li>
</ul>
</li>
<li><code class="docs-inline-code">alt1.json</code>, <code class="docs-inline-code">alt2.json</code>, …: (Optional) The JSON output files for each generated alternative tree.</li>
<li><code class="docs-inline-code">flow-metadata.json</code>: A JSON file containing metadata about the flow run, including the UUID, timestamp, time taken, input file path, and list of programs executed.</li>
<li><strong>Final Report(s):</strong> Files generated by the final <code class="docs-inline-code">assemble.py</code> script (e.g., an HTML report). The exact filenames depend on the implementation of <code class="docs-inline-code">assemble.py</code>.</li>
</ul>
                    </div>
                    
                    <footer class="docs-footer">
                        <div class="docs-meta">
                            <p>Part of the <a href="/">Universal Automation Wiki</a> documentation</p>
                        </div>
                    </footer>
                </article>
            </main>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="/assets/js/components.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'neutral',
            themeVariables: {
                primaryColor: '#126ca8',
                primaryTextColor: '#333',
                primaryBorderColor: '#e0e0e0',
                lineColor: '#666'
            }
        });
    </script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/documentation.js"></script>
    <script>renderDocumentationSidebar('#sidebar-placeholder');</script>
</body>
</html>